<!DOCTYPE html> <!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--> <!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8"><![endif]--> <!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9"><![endif]--> <!--[if gt IE 8]><!--> <html class="no-js"><!--<![endif]--> <head> <meta charset="UTF-8"> <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"> <title>Week 5 Walkthrough &#8211; Jacob West-Roberts</title> <meta name="description" content="Moon is a minimal, one column jekyll theme for your blog."> <meta name="keywords" content="test"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="/assets/img/nerd.jpg"> <meta name="twitter:title" content="Week 5 Walkthrough"> <meta name="twitter:description" content="Testing!"> <meta name="twitter:site" content="@jwestrob"> <meta name="twitter:creator" content="@jwestrob"> <!-- Open Graph --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="Week 5 Walkthrough"> <meta property="og:description" content="Testing!"> <meta property="og:url" content="/Week_5_walkthrough/"> <meta property="og:site_name" content="Jacob West-Roberts"> <meta property="og:image" content="/assets/img/nerd.jpg"> <link rel="canonical" href="/Week_5_walkthrough/"> <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Jacob West-Roberts Feed"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- CSS --> <link rel="stylesheet" href="/assets/css/main.css"> <!-- JS --> <script src="/assets/js/modernizr-3.3.1.custom.min.js"></script> <!-- Favicons --> <link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"> <link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"> <link rel="shortcut icon" type="image/png" href="/favicon.png" /> <link rel="shortcut icon" href="/favicon.ico" /> <!-- Background Image --> <style type="text/css">body {background-image:url(/assets/img/pretty_tree_cropped_smaller.jpg); background-repeat: no-repeat; background-size: cover; }</style> <!-- Post Feature Image --> </head> <body> <nav id="dl-menu" class="dl-menuwrapper" role="navigation"> <button class="dl-trigger">Open Menu</button> <ul class="dl-menu"> <li><a href="/">Home</a></li> <li> <a href="#">About</a> <ul class="dl-submenu"> <li> <img src="/assets/img/nerd.jpg" alt="Jacob West-Roberts photo" class="author-photo"> <h4>Jacob West-Roberts</h4> <p>Moon is a minimal, one column jekyll theme for your blog.</p> </li> <li><a href="/about/"><span class="btn btn-inverse">Learn More</span></a></li> <li> <a href="http://twitter.com/jwestrob" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-twitter-square"></i> Twitter</a> </li> <li> <a href="http://github.com/jwestrob" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-github"></i> Github</a> </li> </ul><!-- /.dl-submenu --> </li> <li> <a href="#">Posts</a> <ul class="dl-submenu"> <li><a href="/posts/">All Posts</a></li> <li><a href="/tags/">All Tags</a></li> </ul> </li> <li><a href="/projects/" >Projects</a></li> <li><a href="/ESPM_112L/" >ESPM_112L</a></li> </ul><!-- /.dl-menu --> </nav><!-- /.dl-menuwrapper --> <!-- Header --> <header class="header" role="banner"> <div class="wrapper animated fadeIn"> <div class="content"> <div class="post-title "> <h1>Week 5 Walkthrough</h1> <h4>17 Feb 2020</h4> <a class="btn zoombtn" href="/projects/"> <i class="fa fa-chevron-left"></i> </a> </div> <h1 id="welcome-to-week-5-of-lab">Welcome to week 5 of lab!</h1> <h3 id="this-week-were-going-to-be-refining-our-bins-and-doing-some-additional-binning-using-esoms-emergent-self-organizing-maps">This week we’re going to be refining our bins and doing some additional binning using ESOMs (Emergent Self-Organizing Maps).</h3> <h3 id="this-is-a-really-interesting-way-of-visualizing-the-way-automated-algorithms-interpret-and-sort-metagenomic-data-next-week-well-be-using-automated-binners-which-utilize-other-unsupervised-machine-learning-algorithms-not-esoms-though-well-talk-more-about-the-other-popular-methods-next-week">This is a really interesting way of visualizing the way automated algorithms interpret and sort metagenomic data. Next week we’ll be using automated binners, which utilize other unsupervised machine learning algorithms. (Not ESOMs, though. We’ll talk more about the other popular methods next week.)</h3> <p>This lab is going to be pretty short from your perspective, but know that there was a lot of preparation that went into this week’s material! I hope it’s enjoyable for you.</p> <hr /> <h1 id="section-1-x11-forwarding">Section 1: X11 Forwarding</h1> <p>You’re going to be doing this week’s lab using a GUI process, which requires some special considerations. GUI stands for <strong>G</strong>raphical <strong>U</strong>ser <strong>I</strong>nterface. You might be thinking, “aren’t we doing all our work in a shell?” Well, yes, we are. This week we’re going to set things up so that you can run a GUI process on our server while having a window on your computer to modify and mess with as you see fit. X11 forwarding is what you’re going to need to use in order to accomplish this.</p> <p>How to set up X11 forwarding depends entirely on which operating system you’re using. In our class, we have four options, which I will order from least to most complicated:</p> <ul> <li>Linux-based operating systems (NOT CHROMEBOOKS): <ul> <li>in your terminal, type <code class="highlighter-rouge">ssh -X [YOUR USERNAME]@class.ggkbase.berkeley.edu</code>. You’re done.</li> </ul> </li> <li>Mac OS X: <ul> <li>For whatever reason, X11 forwarding is disabled by default on macs. Don’t ask me why. In order to get around this, you have to go and download XQuartz (https://www.xquartz.org/).</li> <li>Go and download XQuartz-2.7.11.dmg, open it, and open the .pkg file you’ll find therein. This will install XQuartz on your system.</li> <li>Now log in and log out of your current session. (Go to the top right, click on your username, and click ‘login/switch user’ or whatever it says.)</li> <li>Now, go to your terminal, type <code class="highlighter-rouge">ssh -X [YOUR USERNAME]@class.ggkbase.berkeley.edu</code>. Now you’re done.</li> </ul> </li> <li>Windows: <ul> <li>Download and install xming: https://sourceforge.net/projects/xming/</li> <li>Edit Putty preferences: <img src="X11_putty.png" alt="enable_putty" /></li> <li>Launch your connection as normal. Congratulations.</li> </ul> </li> <li>Chromebook: <ul> <li>Use one of the windows PCs in lab. Sorry.</li> <li>If you really are determined to figure out how to do it, look here: https://superuser.com/questions/1037230/is-there-a-way-to-use-xterm-on-chromebook</li> </ul> </li> </ul> <hr /> <h1 id="section-2-preparing-files-for-esoms">Section 2: Preparing files for ESOMs</h1> <p>Now, I’ve actually run the ESOMs already. (They take a really long time- best to do that before class.) You just need to gather a couple of things.</p> <h3 id="subsection-1-grabbing-all-of-the-esom-files-and-putting-them-in-your-home-directory">Subsection 1: Grabbing all of the ESOM files and putting them in your home directory.</h3> <p>You just need to copy the files over. (Only one person per group needs to do this, strictly speaking, though you all can if you like - the files aren’t that large. Talk to me during lab if you’re doing this.)</p> <p><code class="highlighter-rouge">cp -r /class_data/[YOUR BABY]/esom_files ~</code></p> <h3 id="subsection-2-generating-cls-files">Subsection 2: Generating <code class="highlighter-rouge">.cls</code> files</h3> <p>What you’re going to be doing next is to get a file from &lt;a href=class.ggkbase.berkeley.edu&gt;class.ggkbase.berkeley.edu&lt;/a&gt; (in your browser, not on the terminal) that indicates which scaffolds correspond to each bin.</p> <p>Only one person per group will need to do this.</p> <p>Go to class.ggkbase.berkeley.edu, log in, and navigate to the project folder for your baby. You’ll be downloading a ‘scaffold2bin’ file, which has information for each of the scaffolds in your project and their corresponding bin ID. Download it from this drop-down menu:</p> <p><img src="scaf2bin_ggkbase.png" alt="download_scaf2bin" /></p> <p><strong>It is important that you don’t rename this file for now!! Don’t do it!!</strong></p> <p>Upload this to your home directory on class.ggkbase.berkeley.edu, either by using Putty to SFTP (Windows) or by using a SCP command on your terminal (Linux/Mac) like so:</p> <div class="highlighter-rouge"><pre class="highlight"><code>`scp [BABY ID].scaffolds_to_bin.tsv [YOUR USERID]@class.ggkbase.berkeley.edu:/home/[YOUR USERID]`
</code></pre></div> <p>Where <code class="highlighter-rouge">[BABY ID]</code> is the name of your baby (you’ll see it in the name of the file you download from ggkbase) and <code class="highlighter-rouge">[YOUR USERID]</code> is, as you probably guessed, your username (student1, … , studentX).</p> <p>Once that’s downloaded, you’re going to need to convert this to a <code class="highlighter-rouge">.cls</code> file so that the ESOM program can read it in. You’re going to do this using a script I wrote, like so:</p> <div class="highlighter-rouge"><pre class="highlight"><code>`python3 /class_data/convert_scaf2bin.py [SCAFFOLDS 2 BIN FILE]`
</code></pre></div> <p>which will create a file called <code class="highlighter-rouge">ggkbase_names.cls</code> in your current directory. Now, move that file to <code class="highlighter-rouge">~/esom_files</code>.</p> <p>Good job. Proud of you.</p> <hr /> <h1 id="section-3-binning">Section 3: Binning!!!!</h1> <p>Okay, now comes the fun part. You’re going to actually run the ESOM binning program! This is the GUI process I was talking about earlier. ONE PERSON per group should do the following, in your home directory (<code class="highlighter-rouge">cd ~</code>):</p> <ul> <li> <p>Create a symbolic link to the executable file for the ESOMana program:</p> <p><code class="highlighter-rouge">ln -s /opt/bin/bio/ESOM/bin/esomana .</code></p> </li> <li> <p>Run the program to launch the GUI</p> <p><code class="highlighter-rouge">./esomana</code></p> </li> </ul> <p>Congratulations! Now let’s start loading things. Navigate to the top left of your window and select “File -&gt; Load <code class="highlighter-rouge">*</code>.wts”. You’ll find all the files in your <code class="highlighter-rouge">/home/[USERID]/esom_files</code> folder. If you don’t have that folder, that means you didn’t follow my instructions from earlier. Go look up.</p> <p>You’ll see a colored map with some dots pop up now, like so:</p> <p><img src="esom_init.png" alt="esom_init" /></p> <p>Now you’re going to load the class information from your ggkbase bins. Go to “File -&gt; Load .cls” and select “ggkbase_names.cls”, which should be in your <code class="highlighter-rouge">esom_files/</code> folder.</p> <p>Now, go and look at the ‘Classes’ tab in the bottom menu. You’ll see a bunch of classes, but everything will have the same color- choose a color for each of your bins. After that’s done, you should see something like this:</p> <p><img src="esom_colored.png" alt="esom_colored" /></p> <p>Now we’re going to investigate individual bins and see how we can refine them. In your ‘Classes’ menu, for each class, there’s a little box on the left. If you click it, it will make all the points on the ESOM map corresponding to that class bold, for easier viewing. Try it out, perhaps with a couple closely related bins.</p> <p>Here, I’ve highlighted two closely related bins (at the family level, so kinda close)… notice how they’re next to each other and intermingle a little bit?</p> <div class="entry-meta"> <br> <hr> <span class="entry-tags"><a href="/tags/#test" title="Pages tagged test" class="tag"><span class="term">test</span></a></span> <span class="social-share"> <a href="https://www.facebook.com/sharer/sharer.php?u=/Week_5_walkthrough/" title="Share on Facebook" class="tag"> <span class="term"><i class="fa fa-facebook-square"></i> Share</span> </a> <a href="https://twitter.com/intent/tweet?text=/Week_5_walkthrough/" title="Share on Twitter" class="tag"> <span class="term"><i class="fa fa-twitter-square"></i> Tweet</span> </a> <a href="https://plus.google.com/share?url=/Week_5_walkthrough/" title="Share on Google+" class="tag"> <span class="term"><i class="fa fa-google-plus-square"></i> +1</span> </a> </span> <div style="clear:both"></div> </div> </div> </div> </header> <!-- JS --> <script src="/assets/js/jquery-1.12.0.min.js"></script> <script src="/assets/js/jquery.dlmenu.min.js"></script> <script src="/assets/js/jquery.goup.min.js"></script> <script src="/assets/js/jquery.magnific-popup.min.js"></script> <script src="/assets/js/jquery.fitvid.min.js"></script> <script src="/assets/js/scripts.js"></script> <!-- MathJax --> <script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>
